<div class="layout-wrapper">
    <p-drawer [(visible)]="visible" [modal]="false" [closable]="false" [showCloseIcon]="false"
    id="drawer" (onHide)="visible = false"
        styleClass="fixed-sidebar">

        <ng-template pTemplate="headless">
            <div class="flex flex-column h-full m-top-1rem">

                <div class="overflow-y-auto px-3 mt-4 flex-grow-1">
                    <ul class="list-none p-0 m-0 flex flex-column gap-2">
                        @for (mode of modes; track mode) {
                        <li>
                            <button pRipple (click)="selectMode(mode)"
                                [class]="currentMode === mode ? 'mode-btn active' : 'mode-btn'">
                                <span class="font-medium">{{ mode }}</span>
                            </button>
                        </li>
                        }
                    </ul>
                </div>

            </div>
        </ng-template>
    </p-drawer>

    <main class="main-content" [class.menu-collapsed]="!visible">
        <header class="content-header">
            <p-button [icon]="visible ? 'pi pi-arrow-left' : 'pi pi-bars'" (onClick)="visible = !visible" styleClass="mr-3" />
            <h1>{{ currentMode || 'Select a Mode' }}</h1>
            <p-button label="Clear Filters" icon="pi pi-filter-slash" [text]="true" severity="secondary" />
        </header>

        <section class="table-container">
            @if (activeConfig) {
            <super-table [config]="activeConfig" [data]="activeData"></super-table>
            } @else {
            <div class="loading-state">
                <i class="pi pi-spin pi-spinner text-4xl"></i>
                <p>Destroying & Recreating Table Instance...</p>
            </div>
            }
        </section>
    </main>
</div>